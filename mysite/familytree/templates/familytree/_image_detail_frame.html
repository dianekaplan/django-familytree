
<turbo-frame id="image-frame">
    <div style="margin-bottom: 20px; margin-top: 20px; margin-right: 10px; display: flex; align-items: flex-start; justify-content: flex-start; gap: 40px;">
        <div style="flex: 1; min-width: 0;">
            {% if prev_image_id %}
                <a href="{% url 'image_detail' prev_image_id %}?images={% for i in images %}{% if not forloop.first %},{% endif %}{{ i.id }}{% endfor %}{% if image_set %}&set={{ image_set }}{% endif %}"
                   data-turbo-frame="image-frame"
                   style="font-size: 3em; margin-right: 20px; text-decoration: none; color: #333;">&#8592;</a>
            {% endif %}
            <img src="{{ media_server }}/image/upload/r_20/{{image.big_name}}"  style="max-width:80%; display: inline-block;">
            {% if next_image_id %}
                <a href="{% url 'image_detail' next_image_id %}?images={% for i in images %}{% if not forloop.first %},{% endif %}{{ i.id }}{% endfor %}{% if image_set %}&set={{ image_set }}{% endif %}"
                   data-turbo-frame="image-frame"
                   style="font-size: 3em; margin-left: 20px; text-decoration: none; color: #333;">&#8594;</a>
            {% endif %}
            <div>
                {% if image.caption %}
                    <h3>{{ image.caption }}</h3>
                {% endif %}
                <b>{{ image.year }}</b>
                {% if image.notes %}
                    <p>{{ image.notes }}</p>
                {% endif %}
            </div>
        </div>

        <div style="flex: 0 0 220px; margin-top: 0;">
            {% if image_people %}
                <h3>This picture contains:</h3>
                {% for person in image_people %}
                    {% include "familytree/_face_name_link.html" with person=person %} <br/>
                {% endfor %}
            {% endif %}
            {% if image_person %}
                <h3>Go to person's page:</h3>
                    {% include "familytree/_face_name_link.html" with person=image_person %}
                <br/>
            {%  endif %}
            {% if image_family and not image_people %}
                <h3>Go to family's page:</h3>
                 <a href="{% url 'family_detail' image_family.id %}" data-turbo="false">{{ image_family.display_name }}</a>
                <br/>
            {%  endif %}
        </div>
    </div>

    {# gallery thumbnails row when images list is present #}
    {% if images and not is_mobile %}
        {% load static %}
        <div style="clear: both; margin-top: 20px; max-width: 98vw;">
            <h3>{{ gallery_heading }}</h3>
            <div id="gallery-thumbnails" style="display: inline-block; vertical-align: middle; width: 90vw; overflow-x: auto; white-space: nowrap;">
                <button id="gallery-arrow-left" onclick="galleryPrev()" style="vertical-align: middle; font-size: 2em; background: none; border: none; cursor: pointer; display: none;"
                aria-label="Previous images">&#8592;</button>
                {% for img in images %}
                    <span class="gallery-thumb" style="display: inline-block;">
                        {% include "familytree/image_link.html" with image=img height=75 show_hover=False %}
                    </span>
                {% endfor %}
                {% if images|length > 10 %}
                    <button id="gallery-arrow-right" onclick="galleryNext()" style="vertical-align: middle; font-size: 2em; background: none; border: none; cursor: pointer;" aria-label="Next images">&#8594;</button>
                {% endif %}
            </div>
        </div>
    {% endif %}
</turbo-frame>
